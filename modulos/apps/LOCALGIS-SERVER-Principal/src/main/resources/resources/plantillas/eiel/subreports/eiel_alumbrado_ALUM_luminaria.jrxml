<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
		 name="eiel_alumbrado_ALUM_luminaria"
		 columnCount="1"
		 printOrder="Vertical"
		 orientation="Landscape"
		 pageWidth="535"
		 pageHeight="250"
		 columnWidth="535"
		 columnSpacing="0"
		 leftMargin="0"
		 rightMargin="0"
		 topMargin="0"
		 bottomMargin="0"
		 whenNoDataType="NoPages"
		 isTitleNewPage="false"
		 isSummaryNewPage="false">
	<property name="ireport.scriptlethandling" value="0" />
	<property name="ireport.encoding" value="UTF-8" />
	<import value="java.util.*" />
	<import value="net.sf.jasperreports.engine.*" />
	<import value="net.sf.jasperreports.engine.data.*" />
	<import value="com.geopista.app.filter.LCGFilter" />

	<parameter name="filtro_alum" isForPrompting="true" class="java.lang.String">
		<defaultValueExpression ><![CDATA["limit 0"]]></defaultValueExpression>
	</parameter>
	<parameter name="id_municipio" isForPrompting="true" class="java.lang.String">
		<defaultValueExpression ><![CDATA["0"]]></defaultValueExpression>
	</parameter>
	<parameter name="locale" isForPrompting="true" class="java.lang.String">
		<defaultValueExpression ><![CDATA["es_ES"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" isForPrompting="true" class="java.lang.String">
		<defaultValueExpression ><![CDATA[".\\src\\plantillas\\eiel\\subreports\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="IMPRIMIR_IMAGENES" isForPrompting="false" class="java.lang.Boolean">
		<defaultValueExpression ><![CDATA[new Boolean(true)]]></defaultValueExpression>
	</parameter>
	<parameter name="ID_ENTIDAD" isForPrompting="false" class="java.lang.String">
		<defaultValueExpression ><![CDATA["77"]]></defaultValueExpression>
	</parameter>
	<queryString><![CDATA[SELECT
     eiel_c_nucleo_poblacion."nombre_oficial" AS nucleo,
     eiel_c_nucleo_poblacion."codentidad" AS codentidad,
     eiel_c_nucleo_poblacion."codpoblamiento" AS codpoblamiento,
     eiel_c_alum_pl."ah_ener_rfl" AS reductor_flujo,
     eiel_c_alum_pl."ah_ener_rfi" AS reductor_flujo_inicio,
     eiel_c_alum_pl."tipo_lampara" AS tipo_luminaria,
     eiel_c_alum_pl."potencia" AS potencia,
     eiel_c_alum_pl."n_lamparas" AS puntos_luz,
     eiel_c_alum_pl."observ" AS observ,
     eiel_c_alum_pl.id as id
FROM
     "public"."eiel_c_nucleo_poblacion" eiel_c_nucleo_poblacion LEFT JOIN "public"."eiel_c_alum_pl" eiel_c_alum_pl ON eiel_c_nucleo_poblacion."codprov" = eiel_c_alum_pl."codprov"
     AND eiel_c_nucleo_poblacion."codpoblamiento" = eiel_c_alum_pl."codpoblamiento"
     AND eiel_c_nucleo_poblacion."codmunic" = eiel_c_alum_pl."codmunic"
     AND eiel_c_nucleo_poblacion."codentidad" = eiel_c_alum_pl."codentidad"
WHERE
     eiel_c_nucleo_poblacion.revision_expirada >= 9.699999999E9 and eiel_c_alum_pl.revision_expirada >= 9.699999999E9 and
	 eiel_c_alum_pl."id_municipio" = $P{id_municipio}$P!{filtro_alum}]]></queryString>

	<field name="nucleo" class="java.lang.String"/>
	<field name="codentidad" class="java.lang.String"/>
	<field name="codpoblamiento" class="java.lang.String"/>
	<field name="reductor_flujo" class="java.lang.String"/>
	<field name="reductor_flujo_inicio" class="java.lang.String"/>
	<field name="tipo_luminaria" class="java.lang.String"/>
	<field name="potencia" class="java.lang.Double"/>
	<field name="puntos_luz" class="java.lang.Integer"/>
	<field name="observ" class="java.lang.String"/>
	<field name="id" class="java.math.BigDecimal"/>

	<variable name="var_array_dominios" class="java.lang.Object" resetType="Report" calculation="System">
	</variable>
	<variable name="var_array_patterns" class="java.lang.Object" resetType="Report" calculation="System">
	</variable>
		<background>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</background>
		<title>
			<band height="50"  isSplitAllowed="true" >
				<subreport  isUsingCache="true">
					<reportElement
						x="5"
						y="11"
						width="514"
						height="19"
						key="subreport-2"
						isRemoveLineWhenBlank="true"/>
					<subreportParameter  name="id_municipio">
						<subreportParameterExpression><![CDATA[$P{id_municipio}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="locale">
						<subreportParameterExpression><![CDATA[$P{locale}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="clave_capa">
						<subreportParameterExpression><![CDATA["ALUM"]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<returnValue subreportVariable="var_array_dominios" toVariable="var_array_dominios"/>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR}+"eiel_dominios_BD.jasper"]]></subreportExpression>
				</subreport>
				<subreport  isUsingCache="true">
					<reportElement
						x="5"
						y="30"
						width="514"
						height="19"
						key="subreport-3"
						isRemoveLineWhenBlank="true"/>
					<subreportParameter  name="id_municipio">
						<subreportParameterExpression><![CDATA[$P{id_municipio}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="locale">
						<subreportParameterExpression><![CDATA[$P{locale}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="clave_capa">
						<subreportParameterExpression><![CDATA["ALUM"]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<returnValue subreportVariable="var_array_patterns" toVariable="var_array_patterns"/>
					<subreportExpression  class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR}+"eiel_patterns_BD.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</title>
		<pageHeader>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</pageHeader>
		<columnHeader>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</columnHeader>
		<detail>
			<band height="243"  isSplitAllowed="true" >
				<rectangle>
					<reportElement
						x="7"
						y="3"
						width="523"
						height="226"
						key="rectangle-1"/>
					<graphicElement stretchType="NoStretch"/>
				</rectangle>
				<staticText>
					<reportElement
						x="12"
						y="6"
						width="104"
						height="22"
						key="staticText-25"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Documentación:]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="116"
						y="6"
						width="103"
						height="22"
						key="staticText-29"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica" isBold="false" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Plano de Proyecto]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="225"
						y="6"
						width="40"
						height="22"
						key="staticText-30"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica" isBold="false" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Fichero]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="272"
						y="6"
						width="114"
						height="22"
						key="staticText-31"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica" isBold="false" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Plano de fin de obra]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="12"
						y="50"
						width="267"
						height="22"
						key="staticText-8"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Dispone de reductor de flujo en las luminarias:]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Auto" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="279"
						y="50"
						width="161"
						height="22"
						forecolor="#000000"
						key="textField-1"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica" size="10" isItalic="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[LCGFilter.getValue($V{var_array_patterns},"ah_ener_rfl_" + $F{reductor_flujo})]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						x="12"
						y="94"
						width="104"
						height="22"
						key="staticText-9"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Tipo de luminaria:]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Auto" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="116"
						y="94"
						width="312"
						height="22"
						forecolor="#000000"
						key="textField-2"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica" size="10" isItalic="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[LCGFilter.getValue($V{var_array_patterns},"tipo_luminaria_" + $F{tipo_luminaria})]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Auto" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="12"
						y="116"
						width="516"
						height="27"
						forecolor="#000000"
						key="textField-3"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement>
						<font fontName="Verdana" pdfFontName="Helvetica-Oblique" size="8" isItalic="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["(" + LCGFilter.getValue($V{var_array_dominios},"tipo_luminaria") + ")"]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						x="12"
						y="165"
						width="93"
						height="22"
						key="staticText-12"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Observaciones:]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="12"
						y="28"
						width="47"
						height="22"
						key="staticText-32"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Núcleo:]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="12"
						y="143"
						width="111"
						height="22"
						key="staticText-33"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Potencia instalada:]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="187"
						y="143"
						width="150"
						height="22"
						key="staticText-34"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Número de puntos de luz:]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Auto" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="59"
						y="28"
						width="427"
						height="22"
						forecolor="#000000"
						key="textField-10"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica" size="10" isItalic="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{codentidad}+" - "+$F{codpoblamiento}+" - "+$F{nucleo}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Auto" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="123"
						y="143"
						width="64"
						height="22"
						forecolor="#000000"
						key="textField-11"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica" size="10" isItalic="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{potencia}.toString()]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Auto" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="337"
						y="143"
						width="64"
						height="22"
						forecolor="#000000"
						key="textField-12"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica" size="10" isItalic="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{puntos_luz}.toString()]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement
						x="12"
						y="72"
						width="313"
						height="22"
						key="staticText-36"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica-Bold" isBold="true" isUnderline="false"/>
					</textElement>
				<text><![CDATA[Dispone de reductor de flujo al inicio de la Instalación:]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Auto" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="325"
						y="72"
						width="161"
						height="22"
						forecolor="#000000"
						key="textField-14"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Verdana" pdfFontName="Helvetica" size="10" isItalic="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[LCGFilter.getValue($V{var_array_patterns},"ah_ener_rfi_" + $F{reductor_flujo_inicio})]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="true" evaluationTime="Auto" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="12"
						y="187"
						width="516"
						height="39"
						forecolor="#000000"
						key="textField-15"/>
					<box topBorder="None" topBorderColor="#000000" leftBorder="None" leftBorderColor="#000000" rightBorder="None" rightBorderColor="#000000" bottomBorder="None" bottomBorderColor="#000000"/>
					<textElement verticalAlignment="Top">
						<font fontName="Verdana" pdfFontName="Helvetica" size="10" isItalic="false"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[($F{observ} == null ? "" : $F{observ})]]></textFieldExpression>
				</textField>
			</band>
		</detail>
		<columnFooter>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</columnFooter>
		<pageFooter>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</pageFooter>
		<summary>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</summary>
</jasperReport>
